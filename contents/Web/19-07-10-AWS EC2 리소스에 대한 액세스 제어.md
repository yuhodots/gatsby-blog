---
title: "AWS EC2 리소스에 대한 액세스 제어"
date: "2019-07-10"
template: "post"
draft: false
path: "/server/19-07-10/"
description: " AWS의 EC2 인스턴스를 서버 컴퓨터로 사용하는 경우에, 혼자 개발을 진행하는 것이 아니라 여럿이 한 가지 프로젝트 개발을 진행하고 있다면 그 인스턴스에 서버를 관리하는 팀원 모두가 접근이 가능해야 합니다."
category: "BackEnd"
thumbnail: "aws"
---

> 이 글은 ‘AWS’ 공식 홈페이지의 [AWS 사용설명서](https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/WindowsGuide/UsingIAM.html)를 정리했음을 먼저 밝힙니다.

 AWS의 EC2 인스턴스를 서버 컴퓨터로 사용하는 경우에, 혼자 개발을 진행하는 것이 아니라 여럿이 한 가지 프로젝트 개발을 진행하고 있다면 그 인스턴스에 서버를 관리하는 팀원 모두가 접근이 가능해야 합니다. 하지만 처음 인스턴스를 생성할 때는 한 명의 유저에게 key-pair파일을 제공하기 때문에, 다른 팀원들과는 어떻게 공동작업을 할 수 있는지 궁금해졌고 이렇게 포스팅을 하게 되었습니다.

>  보안 자격 증명은 AWS의 서비스에서 사용자를 식별하고 Amazon EC2 리소스와 같은 AWS 리소스의 무제한 사용을 허가하는 데 사용됩니다. Amazon EC2 및 AWS Identity and Access Management(IAM)의 기능을 사용하면 보안 자격 증명을 공유하지 않고도 다른 사용자, 서비스 및 애플리케이션에 Amazon EC2 리소스 사용을 허가할 수 있습니다. IAM을 사용하여 다른 사용자가 AWS 계정의 리소스를 사용하는 방법을 제어하고 보안 그룹을 사용하여 Amazon EC2 인스턴스에 대한 액세스를 제어할 수 있습니다. Amazon EC2 리소스의 전체 사용 또는 제한 사용을 허가할 수 있습니다. 

 아마존 웹 서비스의 공식 홈페이지 사용설명서에는 이 내용이 잘 설명 되어 있습니다. 잘 설명되어 있는 내용을 제 맘대로 축약해서 설명하자면 우리는 **보안그룹, AMI&EBS, IAM** 이렇게 세 가지 파트에 대한 설정을 진행해야 합니다.

 첫 번째로 **보안그룹**에 대한 설정입니다. 우리는 인스턴스를 시작할 때 하나 이상의 보안 그룹을 할당합니다. 이 때 보안 그룹은 인스턴스에 도달하도록 허용되는 트래픽을 제어하는 방화벽 역할을 하기 때문에,공동 작업자가 이 인스턴스에 접근할 수 있도록 보안그룹 내 규칙을 수정 해 주셔야 합니다. ('내 인스턴스를 우클릭 - 네트워크 - 보안그룹 변경'을 통해 인스턴스의 보안그룹을 변경 할 수 있습니다.)

 두 번째로는 **AMI&EBS**에 대한 설정입니다. 일단 두 서비스에 대한 설명은 다음과 같습니다. Amazon 머신 이미지(AMI)는 소프트웨어 구성이 기재된 템플릿을 말 합니다(예: 운영 체제, 애플리케이션 서버, 애플리케이션). 그래서 AMI를 먼저 생성 한 이후에 이와 동일한 환경을 갖는 다양한 인스턴스들을 손쉽게 생성이 가능합니다. 그리고 Amazon Elastic Block Store(EBS)는 EC2 인스턴스에 사용할 영구 블록 스토리지 볼륨을 제공하며, 각 Amazon EBS 볼륨이 가용 영역 내에 자동으로 복제되어 구성요소 장애로부터 보호해주고, 고가용성 및 내구성을 제공한다는 게 아마존의 설명입니다. AMI에 액세스할 수 있는 AWS 계정 제어는 LaunchPermission 속성으로, Amazon EBS 스냅샷을 사용할 수 있는 AWS 계정을 제어는 createVolumePermission 속성으로 가능하다고 합니다. 

세 번째로는 **IAM**에 대한 설정입니다. 아래의 항목들을 제어하고 싶으면 IAM을 확인하시면 됩니다.

- AWS 계정에 속하는 사용자 및 그룹 생성
- AWS 계정 사용자 각각에 고유한 보안 자격 증명 할당
- 작업 수행 시 각 사용자의 AWS 리소스 사용 권한 제어
- 다른 AWS 계정의 사용자와 AWS 리소스 공유
- AWS 계정에 적용할 규칙 생성 및 규칙을 관리할 사용자나 서비스 규정
- 엔터프라이즈의 기존 자격 증명을 사용해 AWS 리소스를 사용하는 작업 권한 허용

 위의 출처링크를 확인 하면 자세한 순서가 기재 되어 있지만 이번에도 제 맘대로 축약해서 설명을 해보보겠습니다.

먼저, IAM 콘솔 [링크](https://console.aws.amazon.com/iam/)에 접속해서, **그룹-새그룹 생성**을 클릭합니다. 그리고 **그룹이름 설정**, 그룹 사용자에 대한 **권한 설정 (정책 연결)**을 완료 하면 새 그룹이 생성됩니다. 그리고 생성된 이 그룹에 **사용자 추가**를 선택 한 뒤 액세스 유형 설정, 콘솔 암호 설정, 권한 부여 등의 단계를 거치면 IAM그룹과 사용자 생성이 완료됩니다.

저의 경우에는 그룹이름을 admin으로 설정하고, 그룹 정책을 AdministratorAccess으로 설정하였습니다. 이와 관련하여 잘 정리된 [포스팅](https://www.44bits.io/ko/post/first_actions_for_setting_secure_account#그룹을-사용하여-권한-할당)을 발견하여 공유합니다. 