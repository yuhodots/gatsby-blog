{"componentChunkName":"component---src-templates-post-js","path":"/server/19-07-10-2/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p>nignx환경설정에 대한 내용은 opentutorials egoing님의 2013년 <a href=\"https://opentutorials.org/module/384/4526\">자료</a>를 참고하였습니다. </p>\n</blockquote>\n<p> nginx가 어떻게 동작하는지에 대한 설정은 conf라는 확장자 명을 가진 설정파일 내에 기술되어 있습니다. 컴파일을 통해서 설치한 경우라면 /usr/local/nginx/conf 에, <code class=\"language-text\">apt-get</code>을 이용해서 우분투에 설치한 경우는 /etc/nginx에 위치한다고 합니다. 환경에 따라서 저장되는 디렉토리가 다를 수 있기 때문에 <code class=\"language-text\">sudo find / -name nginx.conf</code> 명령어로 쉽게 찾을 수 있습니다. 그리고 아래는 설정 파일들의 역할입니다. </p>\n<ul>\n<li>nginx.conf : 메인 설정 파일</li>\n<li>fcgi.conf : FastCGI 환경설정 파일</li>\n<li>sites-enabled : 활성화된 사이트들의 설정 파일들이 위치. 아파치에서는 Virtual host의 설정에 해당 (존재하지 않을수도 있음)</li>\n<li>sites-available : 비활성화된 사이트들의 설정 파일들이 위치</li>\n</ul>\n<p> 이 중 메인 설정 파일인 nginx.conf의 구조를 파악 해 보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">user www-data<span class=\"token punctuation\">;</span>\nworker_processes  <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\npid /run/nginx.pid<span class=\"token punctuation\">;</span>\n\nevents <span class=\"token punctuation\">{</span>\n    worker_connections  <span class=\"token number\">1024</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nhttp <span class=\"token punctuation\">{</span> \n    include       mime.types<span class=\"token punctuation\">;</span>\n    server <span class=\"token punctuation\">{</span>\n        listen       <span class=\"token number\">80</span><span class=\"token punctuation\">;</span>\n        location / <span class=\"token punctuation\">{</span>\n            root   html<span class=\"token punctuation\">;</span>\n            index  index.html index.htm<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<h5 id=\"1-core-모듈\" style=\"position:relative;\"><a href=\"#1-core-%EB%AA%A8%EB%93%88\" aria-label=\"1 core 모듈 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[1] Core 모듈</h5>\n<ul>\n<li><strong>user</strong>: nginx는 마스터프로세스와 워커프로세스로 나뉘는데, user 지시어를 통해 이 워커프로세스의 권한을 지정 할 수 있습니다. 그리고 워커프로세스가 실질적인 웹 서버의 역할을 수행합니다.</li>\n<li><strong>worker_processes</strong>: 프로세스의 실행 가능한 수를 나타냅니다. </li>\n<li><strong>pid</strong>: 마스터프로세스의 ID 정보가 저장되는 공간입니다.</li>\n</ul>\n<h5 id=\"2-events-블록\" style=\"position:relative;\"><a href=\"#2-events-%EB%B8%94%EB%A1%9D\" aria-label=\"2 events 블록 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[2] Events 블록</h5>\n<p>이벤트 블록은 네트워크의 비동기 이벤트 처리 방식에 대한 옵션 설정 값을 가집니다. worker_connections는 하나의 프로세스가 처리할 수 있는 접속 수를 의미합니다. </p>\n<h5 id=\"3-http-블록\" style=\"position:relative;\"><a href=\"#3-http-%EB%B8%94%EB%A1%9D\" aria-label=\"3 http 블록 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[3] Http 블록</h5>\n<p> server, location의 루트 블록이라고 할 수 있고, 여기서 설정된 값을 하위 블록들이 상속합니다. http 블록은 여러개를 사용할 수 있지만 관리상의 이슈로 한번만 사용하는 것을 권장합니다. </p>\n<ul>\n<li><strong>keepalive_timeout</strong>: 클라이언트에서 커넥션을 유지하는 시간을 의미합니다. 요청도 없으면서 불필요한 커넥션을 유지할 수 있기 때문에 10초 정도로 줄여주거나 낮은 값을 설정하는 것이 좋습니다. </li>\n<li><strong>server_tokens off</strong>: Nginx의 버전을 숨길 수 있는 기능입니다. 주석을 제거하여 보안 이슈를 방지하는 것이 좋습니다. </li>\n</ul>","tableOfContents":"<ul>\n<li><a href=\"/Web/19-07-10-Nginx%20%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/#1-core-%EB%AA%A8%EB%93%88\">1 Core 모듈</a></li>\n<li><a href=\"/Web/19-07-10-Nginx%20%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/#2-events-%EB%B8%94%EB%A1%9D\">2 Events 블록</a></li>\n<li><a href=\"/Web/19-07-10-Nginx%20%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/#3-http-%EB%B8%94%EB%A1%9D\">3 Http 블록</a></li>\n</ul>","frontmatter":{"path":"/server/19-07-10-2/","title":"Nginx 환경설정","category":"BackEnd","date":"2019-07-10"}}},"pageContext":{}},"staticQueryHashes":["2390655019","256249292","63159454"]}