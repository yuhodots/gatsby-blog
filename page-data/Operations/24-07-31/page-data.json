{"componentChunkName":"component---src-templates-post-js","path":"/Operations/24-07-31/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p>Kubernetes는 컨테이너 오케스트레이션 플랫폼 중 하나로 다수의 컨테이너 어플리케이션을 운영 및 관리하고, 배포하고, 확장할 수 있는 여러 자동화된 기능들을 제공하고 있습니다. 본 포스팅에서는 Kubernetes의 기본 개념과 kubectl, helm 등에 대해 기록합니다..</p>\n</blockquote>\n<h3 id=\"kubernetes-components\" style=\"position:relative;\"><a href=\"#kubernetes-components\" aria-label=\"kubernetes components permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes Components</h3>\n<p>쿠버네티스 클러스터를 갖기 위해 필요한 요소들은 다음과 같습니다. </p>\n<ul>\n<li>\n<p>컨트롤 플레인 컴포넌트</p>\n<ul>\n<li>kube-apiserver: Kubernetes API 서버로서 클러스터의 모든 요청을 처리하고 인증, 권한 부여, API 검증/설정을 담당</li>\n<li>etcd: 모든 클러스터 데이터를 저장하는 고가용성 키-값 저장소로, Kubernetes의 상태를 유지</li>\n<li>kube-scheduler: 새로 생성된 Pod에 적합한 노드를 선택하는 스케줄링 작업을 수행</li>\n<li>kube-controller-manager: 노드, 레플리카, 엔드포인트 등의 상태를 지속적으로 관리하고 조정하는 컨트롤러들을 실행</li>\n<li>cloud-controller-manager: 클러스터 자원을 관리하고 조정</li>\n</ul>\n</li>\n<li>\n<p>노드 컴포넌트</p>\n<ul>\n<li>kubelet: 각 노드에서 실행되며 Pod 및 컨테이너의 상태를 관리하고 보고</li>\n<li>kube-proxy: 네트워크 프록시로서 네트워킹을 관리하고 Kubernetes 서비스 간의 통신을 처리</li>\n<li>컨테이너 런타임 (Kubernetes CRI - containerd, CRI-O...): 컨테이너를 실행하고 관리하는 소프트웨어</li>\n</ul>\n</li>\n<li>\n<p>애드온</p>\n<ul>\n<li>DNS: Kubernetes 서비스 간의 이름 해석을 제공하여 네트워킹을 간소화</li>\n<li>웹 UI (대시보드): 클러스터의 상태를 모니터링하고 관리하기 위한 사용자 인터페이스를 제공</li>\n<li>컨테이너 리소스 모니터링: 각 컨테이너의 리소스 사용량을 추적하고 모니터링</li>\n<li>클러스터-레벨 로깅: 클러스터 내의 로그 데이터를 수집하고 저장하여 문제 해결과 감사에 사용</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"kubernetes-objects\" style=\"position:relative;\"><a href=\"#kubernetes-objects\" aria-label=\"kubernetes objects permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes Objects</h3>\n<p>쿠버네티스 시스템에서 영속성을 가지는 오브젝트 kubernetes objects라고 말하는데, 공식 홈페이지에서는 '하나의 의도를 담은 레코드'라고 설명하고 있습니다. </p>\n<ul>\n<li>어떤 애플리케이션이 동작 중이고, 어느 노드에서 위치하는지 기술</li>\n<li>해당 애플리케이션이 이용할 수 있는 리소스 기술</li>\n<li>해당 애플리케이션의 재구동 정책, 업그레이드 정책 등 여러 정책적 요소는 어떤지 기술</li>\n</ul>\n<h5 id=\"object-spec\" style=\"position:relative;\"><a href=\"#object-spec\" aria-label=\"object spec permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object spec</h5>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>deployment\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span> <span class=\"token comment\"># tells deployment to run 2 pods matching the template</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx\n        <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span>1.14.2\n        <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">apiVersion</code>: 오브젝트를 생성에 사용되는 쿠버네티스 API 버전</li>\n<li><code class=\"language-text\">kind</code>: 오브젝트 종류</li>\n<li><code class=\"language-text\">metadata</code>: 클러스터 내에서 오브젝트를 구분지어 주기 위한 정보</li>\n<li><code class=\"language-text\">spec</code>: 오브젝트에 대해 어떤 상태를 의도하는지에 대한 정보</li>\n</ul>\n<h5 id=\"resources\" style=\"position:relative;\"><a href=\"#resources\" aria-label=\"resources permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Resources</h5>\n<ul>\n<li>\n<p>워크로드 리소스</p>\n<ul>\n<li>Pod: 하나 이상의 컨테이너를 포함하는 가장 작은 배포 단위</li>\n<li>ReplicationController: 원하는 수의 Pod를 유지하도록 관리</li>\n<li>ReplicaSet: 특정 수의 Pod를 유지하도록 관리</li>\n<li>Deployment: 애플리케이션의 선언적 업데이트를 제공</li>\n<li>StatefulSet: 고유하고 안정적인 네트워크 식별자와 스토리지의 순서를 보장하는 애플리케이션을 관리</li>\n<li>DaemonSet: 모든 (또는 일부) 노드에서 실행되는 Pod를 보장</li>\n<li>Job: 일회성 작업을 관리하고 완료를 보장</li>\n<li>CronJob: 일정에 따라 주기적으로 작업을 수행</li>\n</ul>\n</li>\n<li>\n<p>네트워킹 리소스</p>\n<ul>\n<li>Service: Pod 간의 네트워크 접속을 관리</li>\n<li>Ingress: 외부 HTTP 및 HTTPS 트래픽을 클러스터 내의 서비스로 라우팅</li>\n<li>NetworkPolicy: Pod의 네트워크 트래픽을 제어</li>\n</ul>\n</li>\n<li>\n<p>구성 리소스</p>\n<ul>\n<li>ConfigMap: 애플리케이션 설정 데이터를 저장하고 관리</li>\n<li>Secret: 민감한 데이터(예: 비밀번호, 토큰, 키)를 저장하고 관리</li>\n</ul>\n</li>\n<li>\n<p>권한 부여 리소스</p>\n<ul>\n<li>ServiceAccount: Pod에 권한을 부여하기 위한 사용자 계정</li>\n<li>Role: 네임스페이스 내 리소스에 대한 권한을 정의</li>\n<li>ClusterRole: 클러스터 전체에 걸쳐 리소스에 대한 권한을 정의</li>\n<li>RoleBinding: 네임스페이스 내의 사용자/그룹에 역할을 부여</li>\n<li>ClusterRoleBinding: 클러스터 전체의 사용자/그룹에 역할을 부여</li>\n</ul>\n</li>\n<li>\n<p>정책 리소스</p>\n<ul>\n<li>PodSecurityPolicy: Pod 보안 정책을 정의하여 Pod의 보안 설정을 제어</li>\n<li>ResourceQuota: 네임스페이스 내에서 리소스 사용량을 제한</li>\n<li>LimitRange: 네임스페이스 내의 리소스 사용량을 제한하고 요청과 한계를 정의</li>\n</ul>\n</li>\n<li>\n<p>클러스터 관리 리소스</p>\n<ul>\n<li>Namespace: 논리적으로 클러스터 리소스를 그룹화</li>\n<li>Node: 클러스터 내의 단일 노드를 나타냄</li>\n<li>PersistentVolume (PV): 클러스터 내의 스토리지 리소스를 나타냄</li>\n<li>PersistentVolumeClaim (PVC): 사용자와 Pod가 사용할 스토리지를 요청</li>\n<li>StorageClass: 스토리지 제공자의 스토리지 설정을 정의</li>\n<li>VolumeAttachment: 외부 스토리지 시스템의 볼륨을 클러스터의 노드에 연결</li>\n</ul>\n</li>\n<li>\n<p>기타</p>\n<ul>\n<li>HorizontalPodAutoscaler: 애플리케이션의 부하에 따라 Pod의 수를 자동으로 조정</li>\n<li>VerticalPodAutoscaler: Pod의 리소스 요청을 자동으로 조정</li>\n<li>PodDisruptionBudget: 클러스터 관리 중에 서비스 가용성을 보장하기 위한 최소 Pod 수를 정의</li>\n<li>CustomResourceDefinition (CRD): 사용자 정의 리소스를 정의하여 Kubernetes API를 확장</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"kubectl\" style=\"position:relative;\"><a href=\"#kubectl\" aria-label=\"kubectl permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubectl</h3>\n<p>Kubernetes API를 사용하여 쿠버네티스 클러스터의 컨트롤 플레인과 통신하기 위한 커맨드라인 툴을 kubectl 이라고 합니다. kubectl 관련 <em><a href=\"https://kubernetes.io/ko/docs/reference/kubectl/#%EB%AA%85%EB%A0%B9%EC%96%B4\">명령어</a>, <a href=\"https://kubernetes.io/ko/docs/reference/kubectl/#%EB%A6%AC%EC%86%8C%EC%8A%A4-%ED%83%80%EC%9E%85\">지원 리소스 타입</a>, <a href=\"https://kubernetes.io/ko/docs/reference/kubectl/#%EC%B6%9C%EB%A0%A5-%EC%98%B5%EC%85%98\">출력 설정</a></em> 등에 대한 더 자세한 설명은 공식 홈페이지에 기술되어 있습니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl [command] [TYPE] [NAME] [flags]</code></pre></div>\n<ul>\n<li>\n<p><code class=\"language-text\">command</code>: 수행할 작업을 지정</p>\n<ul>\n<li><code class=\"language-text\">get</code>: 리소스 조회</li>\n<li><code class=\"language-text\">create</code>: 새로운 리소스 생성</li>\n<li><code class=\"language-text\">apply</code>: YAML 파일을 이용해 리소스를 생성 또는 업데이트</li>\n<li><code class=\"language-text\">delete</code>: 리소스 삭제</li>\n<li><code class=\"language-text\">describe</code>: 리소스의 상세 정보를 표시</li>\n<li><code class=\"language-text\">edit</code>: 리소스 편집</li>\n<li><code class=\"language-text\">logs</code>: 특정 Pod의 로그 조회</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">TYPE</code>: 리소스 타입을 지정. 리소스 유형은 단수형과 복수형을 모두 사용할 수 있음</p>\n<ul>\n<li><code class=\"language-text\">pod</code>, <code class=\"language-text\">pods</code>, <code class=\"language-text\">deployment</code>, <code class=\"language-text\">deployments</code>, <code class=\"language-text\">service</code>, <code class=\"language-text\">services</code>, <code class=\"language-text\">node</code>, <code class=\"language-text\">nodes</code>, <code class=\"language-text\">configmap</code>, etc.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">NAME</code>: 작업할 리소스의 유형을 지정. 이름 생략시, 해당 리소스 유형의 모든 인스턴스를 대상으로 명령 적용</p>\n<ul>\n<li>리소스가 모두 동일한 타입인 경우: <code class=\"language-text\">TYPE1 name1 name2 name&lt;#&gt;</code>: <code class=\"language-text\">kubectl get pod example-pod1 example-pod2</code></li>\n<li>여러 리소스 타입을 개별적으로 지정하고 싶은 경우: <code class=\"language-text\">TYPE1/name1 TYPE1/name2 TYPE2/name3 TYPE&lt;#&gt;/name&lt;#&gt;</code>: <code class=\"language-text\">kubectl get pod/example-pod1 replicationcontroller/example-rc1</code></li>\n<li>하나 이상의 파일로 리소스를 지정하려는 경우: <code class=\"language-text\">-f file1 -f file2 -f file&lt;#&gt;</code></li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">flags</code>: 선택적 플래그</p>\n<ul>\n<li><code class=\"language-text\">-s</code> 또는 <code class=\"language-text\">--server</code>: 쿠버네티스 API 서버의 주소와 포트를 지정</li>\n<li><code class=\"language-text\">-n</code> 또는 <code class=\"language-text\">--namespace</code>: 명령을 실행할 네임스페이스를 지정</li>\n<li><code class=\"language-text\">-o</code> 또는 <code class=\"language-text\">--output</code>: 출력 형식을 지정 (<code class=\"language-text\">-o yaml</code>, <code class=\"language-text\">-o json</code>, <code class=\"language-text\">-o wide</code>)</li>\n<li><code class=\"language-text\">--kubeconfig</code>: 특정 kubeconfig 파일을 사용하도록 지정</li>\n<li><code class=\"language-text\">--context</code>: 명령을 실행할 kubeconfig 컨텍스트를 지정</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"yaml\" style=\"position:relative;\"><a href=\"#yaml\" aria-label=\"yaml permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>YAML</h3>\n<ul>\n<li>데이터 표현: 데이터는 key, value 형태로 표현됨</li>\n<li>Indentation: 기본적으로는 2칸을 권장(helm에서는 2칸만 지원)하며 4칸도 가능</li>\n<li>Boolean: true, false 뿐만 아니라 yes, no도 지원</li>\n<li>\n<p>List: 하이픈('-')으로 표현</p>\n<ul>\n<li>dict와 list를 abbrviate 형태로 표현도 가능함 </li>\n<li>e.g., <code class=\"language-text\">martin: {name: Martin D&#39;vloper, job: Developer, skill: Elite}</code></li>\n<li>e.g., <code class=\"language-text\">fruits: [&#39;Apple&#39;, &#39;Orange&#39;, &#39;Strawberry&#39;, &#39;Mango&#39;]</code></li>\n</ul>\n</li>\n<li>\n<p>Multiline string</p>\n<ul>\n<li><code class=\"language-text\">|</code>: 블록 내 줄바꿈 문자를 유지</li>\n<li><code class=\"language-text\">&gt;</code>: 블록 내 줄바꿈 문자를 스페이스로 변환</li>\n<li><code class=\"language-text\">|-</code>: 마지막 줄바꿈을 제외하고 인식</li>\n</ul>\n</li>\n<li><code class=\"language-text\">---</code>: 문서의 시작 (optional)</li>\n<li><code class=\"language-text\">...</code>: 문서의 끝 (optional)</li>\n</ul>\n<h3 id=\"helm\" style=\"position:relative;\"><a href=\"#helm\" aria-label=\"helm permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Helm</h3>\n<p>Helm chart는 Kubernetes 애플리케이션을 정의하는 템플릿화된 YAML 파일들의 모음입니다. 하나의 chart는 애플리케이션을 배포하는 데 필요한 모든 Kubernetes 리소스를 포함하고 있습니다. 기본적인 구조는 다음과 같습니다.</p>\n<ul>\n<li>Chart.yaml: chart에 대한 메타데이터(이름, 버전, 설명 등)를 포함하는 파일</li>\n<li>values.yaml: chart에서 사용되는 기본값들을 정의하는 파일</li>\n<li>templates/: 실제 Kubernetes 리소스를 정의하는 템플릿 파일들이 위치한 디렉토리</li>\n</ul>\n<p>values는 chart의 '템플릿 파일'들에 전달되는 변수 값들을 정의합니다. 기본값은 <code class=\"language-text\">values.yaml</code> 파일에 정의되며, 사용자 정의 값은 설치 시 <code class=\"language-text\">--values</code> 또는 <code class=\"language-text\">-f</code> 플래그를 사용하여 추가할 수 있습니다. values 파일을 통해 동일한 chart를 다양한 환경에서 재사용할 수 있습니다(가장 쉬운 예로는 dev, prod 분리)</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># values.yaml</span>\n<span class=\"token key atrule\">replicaCount</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n<span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">repository</span><span class=\"token punctuation\">:</span> nginx\n  <span class=\"token key atrule\">tag</span><span class=\"token punctuation\">:</span> stable</code></pre></div>\n<p>Template은 Kubernetes 리소스 정의를 동적이고 유연하게 만들기 위해 사용하는 템플릿 파일입니다. 정의된 변수들은 values 파일에서 정의된 값들로 치환되며, 이를 통해 Kubernetes 매니페스트를 동적으로 생성할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># templates/deployment.yaml</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .Release.Name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span>deployment\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .Values.replicaCount <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"{{ .Values.image.repository }}:{{ .Values.image.tag }}\"</span></code></pre></div>\n<p>결과적으로, 전체적인 동작은 다음과 같습니다.</p>\n<ol>\n<li>Helm chart는 Kubernetes 애플리케이션을 배포하는 데 필요한 모든 리소스 정의를 포함합니다.</li>\n<li>values 파일을 통해 애플리케이션 배포에 사용할 값들을 설정합니다. </li>\n<li>template 파일은 values 파일의 값들을 사용하여 Kubernetes 리소스 매니페스트를 동적으로 생성합니다.</li>\n<li>최종적으로 Helm은 템플릿을 렌더링하여 완전한 Kubernetes 매니페스트 파일을 생성하고 이를 클러스터에 적용합니다. 미리 적용될 값을 확인해보기 위해서는 <code class=\"language-text\">--dry-run</code> 옵션을 사용해볼 수 있습니다 (<code class=\"language-text\">helm install NAME . --dry-run --values=values.yaml</code>).</li>\n</ol>\n<p>다양한 helm 커맨드들은 공식 사이트의 <a href=\"https://helm.sh/docs/intro/cheatsheet/\">cheat sheet</a> 항목에서 확인 가능합니다.</p>\n<h3 id=\"references\" style=\"position:relative;\"><a href=\"#references\" aria-label=\"references permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>References</h3>\n<ul>\n<li><a href=\"https://kubernetes.io/ko/docs/home/\">https://kubernetes.io/ko/docs/home/</a></li>\n<li><a href=\"https://helm.sh/ko/docs/\">https://helm.sh/ko/docs/</a></li>\n<li><a href=\"https://www.json2yaml.com/\">https://www.json2yaml.com/</a></li>\n<li><a href=\"https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html\">https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html</a></li>\n</ul>","tableOfContents":"<ul>\n<li><a href=\"/MachineLearning/24-07-31-Kubernetes%20Basics/#kubernetes-components\">Kubernetes Components</a></li>\n<li>\n<p><a href=\"/MachineLearning/24-07-31-Kubernetes%20Basics/#kubernetes-objects\">Kubernetes Objects</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"/MachineLearning/24-07-31-Kubernetes%20Basics/#object-spec\">Object spec</a></li>\n<li><a href=\"/MachineLearning/24-07-31-Kubernetes%20Basics/#resources\">Resources</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"/MachineLearning/24-07-31-Kubernetes%20Basics/#kubectl\">Kubectl</a></li>\n<li><a href=\"/MachineLearning/24-07-31-Kubernetes%20Basics/#yaml\">YAML</a></li>\n<li><a href=\"/MachineLearning/24-07-31-Kubernetes%20Basics/#helm\">Helm</a></li>\n<li><a href=\"/MachineLearning/24-07-31-Kubernetes%20Basics/#references\">References</a></li>\n</ul>","frontmatter":{"path":"/Operations/24-07-31/","title":"Kubernetes Basics","category":"Operations","date":"2024-07-31"}}},"pageContext":{}},"staticQueryHashes":["2390655019","256249292","63159454"]}