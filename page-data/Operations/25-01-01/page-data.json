{"componentChunkName":"component---src-templates-post-js","path":"/Operations/25-01-01/","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p>Kubernetes는 컨테이너 오케스트레이션 플랫폼 중 하나로 다수의 컨테이너 어플리케이션을 운영 및 관리하고, 배포하고, 확장할 수 있는 여러 자동화된 기능들을 제공하고 있습니다. 본 포스팅에서는 Kubernetes의 기본 개념부터, kubectl, helm 등에 대해 기록합니다.</p>\n</blockquote>\n<h3 id=\"kubernetes-components\" style=\"position:relative;\"><a href=\"#kubernetes-components\" aria-label=\"kubernetes components permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes Components</h3>\n<p>쿠버네티스 클러스터를 갖기 위해 필요한 요소들은 다음과 같습니다. </p>\n<ul>\n<li>\n<p><strong>컨트롤 플레인 컴포넌트</strong></p>\n<ul>\n<li><strong>kube-apiserver</strong>: Kubernetes API 서버로서 클러스터의 모든 요청을 처리하고 인증, 권한 부여, API 검증/설정을 담당</li>\n<li><strong>etcd</strong>: 모든 클러스터 데이터를 저장하는 고가용성 키-값 저장소로, Kubernetes의 상태를 유지</li>\n<li><strong>kube-scheduler</strong>: 새로 생성된 Pod에 적합한 노드를 선택하는 스케줄링 작업을 수행</li>\n<li><strong>kube-controller-manager</strong>: 노드, 레플리카, 엔드포인트 등의 상태를 지속적으로 관리하고 조정하는 컨트롤러들을 실행</li>\n<li>cloud-controller-manager: 클러스터 자원을 관리하고 조정</li>\n</ul>\n</li>\n<li>\n<p><strong>노드 컴포넌트</strong></p>\n<ul>\n<li><strong>kubelet</strong>: 각 노드에서 실행되며 Pod 및 컨테이너의 상태를 관리하고 보고</li>\n<li><strong>kube-proxy</strong>: 네트워크 프록시로서 네트워킹을 관리하고 Kubernetes 서비스 간의 통신을 처리</li>\n<li><strong>컨테이너 런타임</strong> (Kubernetes CRI - containerd, CRI-O...): 컨테이너를 실행하고 관리하는 소프트웨어</li>\n</ul>\n</li>\n<li>\n<p>애드온</p>\n<ul>\n<li>DNS: Kubernetes 서비스 간의 이름 해석을 제공하여 네트워킹을 간소화</li>\n<li>웹 UI (대시보드): 클러스터의 상태를 모니터링하고 관리하기 위한 사용자 인터페이스를 제공</li>\n<li>컨테이너 리소스 모니터링: 각 컨테이너의 리소스 사용량을 추적하고 모니터링</li>\n<li>클러스터-레벨 로깅: 클러스터 내의 로그 데이터를 수집하고 저장하여 문제 해결과 감사에 사용</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"kubernetes-objects\" style=\"position:relative;\"><a href=\"#kubernetes-objects\" aria-label=\"kubernetes objects permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes Objects</h3>\n<p>쿠버네티스 시스템에서 영속성을 가지는 오브젝트 kubernetes objects라고 말하는데, 공식 홈페이지에서는 '하나의 의도를 담은 레코드'라고 설명하고 있습니다. </p>\n<ul>\n<li>어떤 애플리케이션이 동작 중이고, 어느 노드에서 위치하는지 기술</li>\n<li>해당 애플리케이션이 이용할 수 있는 리소스 기술</li>\n<li>해당 애플리케이션의 재구동 정책, 업그레이드 정책 등 여러 정책적 요소는 어떤지 기술</li>\n</ul>\n<h5 id=\"object-spec\" style=\"position:relative;\"><a href=\"#object-spec\" aria-label=\"object spec permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object spec</h5>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>deployment\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span> <span class=\"token comment\"># tells deployment to run 2 pods matching the template</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx\n        <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span>1.14.2\n        <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code></pre></div>\n<ul>\n<li>\n<p><strong><code class=\"language-text\">apiVersion</code></strong>: 오브젝트를 생성에 사용되는 쿠버네티스 API 버전</p>\n<ul>\n<li>POD: v1</li>\n<li>Service: v1</li>\n<li>ReplicaSet: apps/v1</li>\n<li>Deployment: apps/v1</li>\n</ul>\n</li>\n<li><strong><code class=\"language-text\">kind</code></strong>: 오브젝트 종류</li>\n<li>\n<p><strong><code class=\"language-text\">metadata</code></strong>: 클러스터 내에서 오브젝트를 구분지어 주기 위한 정보</p>\n<ul>\n<li>name: 오브젝트의 이름</li>\n<li>labels: 비슷한 오브젝트들을 연결지어주는 레이블</li>\n</ul>\n</li>\n<li><strong><code class=\"language-text\">spec</code></strong>: 오브젝트에 대해 어떤 상태를 의도하는지에 대한 정보</li>\n</ul>\n<h5 id=\"resources\" style=\"position:relative;\"><a href=\"#resources\" aria-label=\"resources permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Resources</h5>\n<ul>\n<li>\n<p><strong>Workloads</strong></p>\n<ul>\n<li><strong>Pod</strong>: 하나 이상의 컨테이너를 포함하는 가장 작은 배포 단위</li>\n<li>ReplicationController: 원하는 수의 Pod를 유지하도록 관리 (거의 사용되지 않고 ReplicaSet으로 대체)</li>\n<li><strong>ReplicaSet</strong>: 특정 수의 Pod를 유지하도록 관리</li>\n<li><strong>Deployment</strong>: 애플리케이션의 선언적 업데이트를 제공</li>\n<li><strong>StatefulSet</strong>: 고유하고 안정적인 네트워크 식별자와 스토리지의 순서를 보장하는 애플리케이션을 관리</li>\n<li><strong>DaemonSet</strong>: 모든 (또는 일부) 노드에서 실행되는 Pod를 보장</li>\n<li><strong>Job</strong>: 일회성 작업을 관리하고 완료를 보장</li>\n<li><strong>CronJob</strong>: 일정에 따라 주기적으로 작업을 수행</li>\n</ul>\n</li>\n<li>\n<p><strong>Network</strong></p>\n<ul>\n<li><strong>Service</strong>: Pod 간의 네트워크 접속을 관리</li>\n<li><strong>Ingress</strong>: 외부 HTTP 및 HTTPS 트래픽을 클러스터 내의 서비스로 라우팅</li>\n<li><strong>NetworkPolicy</strong>: Pod의 네트워크 트래픽을 제어</li>\n<li>이 외, Endpoint, Network policy, Port forwarding...</li>\n</ul>\n</li>\n<li>\n<p><strong>Config</strong></p>\n<ul>\n<li><strong>ConfigMap</strong>: 애플리케이션 설정 데이터를 저장하고 관리</li>\n<li><strong>Secret</strong>: 민감한 데이터(예: 비밀번호, 토큰, 키)를 저장하고 관리</li>\n<li><strong>ResourceQuota</strong>: 네임스페이스 내에서 리소스 사용량을 제한</li>\n<li><strong>LimitRange</strong>: 네임스페이스 내의 리소스 사용량을 제한하고 요청과 한계를 정의</li>\n</ul>\n</li>\n<li>\n<p><strong>Access Control</strong></p>\n<ul>\n<li><strong>ServiceAccount</strong>: Pod에 권한을 부여하기 위한 사용자 계정</li>\n<li><strong>Role</strong>: 네임스페이스 내 리소스에 대한 권한을 정의</li>\n<li><strong>ClusterRole</strong>: 클러스터 전체에 걸쳐 리소스에 대한 권한을 정의</li>\n<li><strong>RoleBinding</strong>: 네임스페이스 내의 사용자/그룹에 역할을 부여</li>\n<li><strong>ClusterRoleBinding</strong>: 클러스터 전체의 사용자/그룹에 역할을 부여</li>\n</ul>\n</li>\n<li>\n<p><strong>Storage</strong></p>\n<ul>\n<li><strong>PersistentVolume (PV)</strong>: 클러스터 내의 스토리지 리소스를 나타냄</li>\n<li><strong>PersistentVolumeClaim (PVC)</strong>: 사용자와 Pod가 사용할 스토리지를 요청</li>\n<li><strong>StorageClass</strong>: 스토리지 제공자의 스토리지 설정을 정의</li>\n<li>VolumeAttachment: 외부 스토리지 시스템의 볼륨을 클러스터의 노드에 연결</li>\n</ul>\n</li>\n<li>\n<p>etc.</p>\n<ul>\n<li><strong>Namespace</strong>: 논리적으로 클러스터 리소스를 그룹화</li>\n<li>PodSecurityPolicy: Pod 보안 정책을 정의하여 Pod의 보안 설정을 제어</li>\n<li>HorizontalPodAutoscaler: 애플리케이션의 부하에 따라 Pod의 수를 자동으로 조정</li>\n<li>VerticalPodAutoscaler: Pod의 리소스 요청을 자동으로 조정</li>\n<li>PodDisruptionBudget: 클러스터 관리 중에 서비스 가용성을 보장하기 위한 최소 Pod 수를 정의</li>\n<li>CustomResourceDefinition (CRD): 사용자 정의 리소스를 정의하여 Kubernetes API를 확장</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"kubectl\" style=\"position:relative;\"><a href=\"#kubectl\" aria-label=\"kubectl permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubectl</h3>\n<p>Kubernetes API를 사용하여 쿠버네티스 클러스터의 컨트롤 플레인과 통신하기 위한 커맨드라인 툴을 kubectl 이라고 합니다. kubectl 관련 <em><a href=\"https://kubernetes.io/ko/docs/reference/kubectl/#%EB%AA%85%EB%A0%B9%EC%96%B4\">명령어</a>, <a href=\"https://kubernetes.io/ko/docs/reference/kubectl/#%EB%A6%AC%EC%86%8C%EC%8A%A4-%ED%83%80%EC%9E%85\">지원 리소스 타입</a>, <a href=\"https://kubernetes.io/ko/docs/reference/kubectl/#%EC%B6%9C%EB%A0%A5-%EC%98%B5%EC%85%98\">출력 설정</a></em> 등에 대한 더 자세한 설명은 공식 홈페이지에 기술되어 있습니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl [command] [TYPE] [NAME] [flags]</code></pre></div>\n<ul>\n<li>\n<p><code class=\"language-text\">command</code>: 수행할 작업을 지정</p>\n<ul>\n<li><strong><code class=\"language-text\">get</code></strong>: 리소스 조회</li>\n<li><strong><code class=\"language-text\">create</code></strong>: 새로운 리소스 생성</li>\n<li><strong><code class=\"language-text\">apply</code></strong>: YAML 파일을 이용해 리소스를 생성 또는 업데이트</li>\n<li><strong><code class=\"language-text\">delete</code></strong>: 리소스 삭제</li>\n<li><strong><code class=\"language-text\">describe</code></strong>: 리소스의 상세 정보를 표시</li>\n<li><code class=\"language-text\">edit</code>: 리소스 편집</li>\n<li><strong><code class=\"language-text\">logs</code></strong>: 특정 Pod의 로그 조회</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">TYPE</code>: 리소스 타입을 지정. 리소스 유형은 단수형과 복수형을 모두 사용할 수 있음</p>\n<ul>\n<li><code class=\"language-text\">pod</code>, <code class=\"language-text\">pods</code>, <code class=\"language-text\">deployment</code>, <code class=\"language-text\">deployments</code>, <code class=\"language-text\">service</code>, <code class=\"language-text\">services</code>, <code class=\"language-text\">node</code>, <code class=\"language-text\">nodes</code>, <code class=\"language-text\">configmap</code>, etc.</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">NAME</code>: 작업할 리소스의 유형을 지정. 이름 생략시, 해당 리소스 유형의 모든 인스턴스를 대상으로 명령 적용</p>\n<ul>\n<li>리소스가 모두 동일한 타입인 경우: <code class=\"language-text\">TYPE1 name1 name2 name&lt;#&gt;</code>: <code class=\"language-text\">kubectl get pod example-pod1 example-pod2</code></li>\n<li>여러 리소스 타입을 개별적으로 지정하고 싶은 경우: <code class=\"language-text\">TYPE1/name1 TYPE1/name2 TYPE2/name3 TYPE&lt;#&gt;/name&lt;#&gt;</code>: <code class=\"language-text\">kubectl get pod/example-pod1 replicationcontroller/example-rc1</code></li>\n<li>하나 이상의 파일로 리소스를 지정하려는 경우: <code class=\"language-text\">-f file1 -f file2 -f file&lt;#&gt;</code></li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">flags</code>: 선택적 플래그</p>\n<ul>\n<li><code class=\"language-text\">-s</code> 또는 <code class=\"language-text\">--server</code>: 쿠버네티스 API 서버의 주소와 포트를 지정</li>\n<li><code class=\"language-text\">-n</code> 또는 <code class=\"language-text\">--namespace</code>: 명령을 실행할 네임스페이스를 지정</li>\n<li><code class=\"language-text\">-o</code> 또는 <code class=\"language-text\">--output</code>: 출력 형식을 지정 (<code class=\"language-text\">-o yaml</code>, <code class=\"language-text\">-o json</code>, <code class=\"language-text\">-o wide</code>)</li>\n<li><code class=\"language-text\">--kubeconfig</code>: 특정 kubeconfig 파일을 사용하도록 지정</li>\n<li><code class=\"language-text\">--context</code>: 명령을 실행할 kubeconfig 컨텍스트를 지정</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"yaml\" style=\"position:relative;\"><a href=\"#yaml\" aria-label=\"yaml permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>YAML</h3>\n<ul>\n<li>데이터 표현: 데이터는 key, value 형태로 표현됨</li>\n<li>Indentation: 기본적으로는 2칸을 권장(helm에서는 2칸만 지원)하며 4칸도 가능</li>\n<li>Boolean: true, false 뿐만 아니라 yes, no도 지원</li>\n<li>\n<p>List: 하이픈('-')으로 표현</p>\n<ul>\n<li>dict와 list를 abbrviate 형태로 표현도 가능함 </li>\n<li>e.g., <code class=\"language-text\">martin: {name: Martin D&#39;vloper, job: Developer, skill: Elite}</code></li>\n<li>e.g., <code class=\"language-text\">fruits: [&#39;Apple&#39;, &#39;Orange&#39;, &#39;Strawberry&#39;, &#39;Mango&#39;]</code></li>\n</ul>\n</li>\n<li>\n<p>Multiline string</p>\n<ul>\n<li><code class=\"language-text\">|</code>: 블록 내 줄바꿈 문자를 유지</li>\n<li><code class=\"language-text\">&gt;</code>: 블록 내 줄바꿈 문자를 스페이스로 변환</li>\n<li><code class=\"language-text\">|-</code>: 마지막 줄바꿈을 제외하고 인식</li>\n</ul>\n</li>\n<li><code class=\"language-text\">---</code>: 문서의 시작 (optional)</li>\n<li><code class=\"language-text\">...</code>: 문서의 끝 (optional)</li>\n</ul>\n<h3 id=\"core-concepts-for-cka\" style=\"position:relative;\"><a href=\"#core-concepts-for-cka\" aria-label=\"core concepts for cka permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Core Concepts for CKA</h3>\n<ul>\n<li>\n<p>k8s에서 pod을 yaml 기반으로 선언하는 간단한 예제</p>\n<ul>\n<li><code class=\"language-text\">kubectl apply -f pod.yaml</code> 를 통해 적용 가능</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># pod definition</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>simple<span class=\"token punctuation\">-</span>pod\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>app\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>container\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span>latest\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code></pre></div>\n<ul>\n<li>\n<p><strong>RepicaSets</strong>: 특정 개수의 동일한 Pod이 항상 실행되도록 보장. 그러나 보통 Deployment를 통해 관리</p>\n<ul>\n<li>라벨 셀렉터를 사용해 관리할 Pod을 식별</li>\n<li>수동으로 업데이트 필요하며, 롤백 지원하지 않음</li>\n</ul>\n</li>\n<li>\n<p><strong>Deployments</strong>: ReplicaSet의 상위 개념으로, Pod과 ReplicaSet에 대한 선언적 업데이트를 제공. 애플리케이션의 배포를 쉽게 관리하며, 무중단 업데이트를 보장</p>\n<ul>\n<li>롤링 업데이트 및 롤백 기능 제공</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># k8s yaml definition for ReplicaSet</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ReplicaSet\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>replicaset\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>app\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\t<span class=\"token comment\"># 위의 pod.yaml에서 내용 거의 그대로 가져오면 됨</span>\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>app\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>container\n        <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span>latest</code></pre></div>\n<ul>\n<li><strong>Service</strong>: Pod의 네트워크를 노출하고, 로드밸런싱을 제공하여 클러스터 내부와 외부에서 안정적으로 애플리케이션에 접근할 수 있도록 도와줌</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>Type</th>\n<th>Internal</th>\n<th>External</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>ClusterIP</strong></td>\n<td>O</td>\n<td>X</td>\n<td>클러스터 내부에서만 접근 가능한 내부 IP를 생성</td>\n</tr>\n<tr>\n<td><strong>NodePort</strong></td>\n<td>O</td>\n<td>O</td>\n<td>테스트 또는 간단한 외부 노출을 위해, 클러스터 외부에서 접근 가능하도록 각 노드의 특정 포트를 열어즘 (<strong>노드의 IP 사용</strong>)</td>\n</tr>\n<tr>\n<td><strong>LoadBalancer</strong></td>\n<td>O</td>\n<td>O</td>\n<td>'클라우드 환경'에서 외부 로드밸런서를 자동으로 생성해 외부 접근을 제공. 클라우드 제공 업체(AWS, GCP, Azure 등)의 <strong>네트워크 로드밸런서를 사용</strong>하며, NodePort와 ClusterIP를 내부적으로 사용</td>\n</tr>\n<tr>\n<td><strong>ExternalName</strong></td>\n<td>-</td>\n<td>O</td>\n<td><strong>DNS 이름을 사용</strong>해 클러스터 외부 서비스로 요청을 라우팅. 클러스터 외부의 데이터베이스나 API 서버를 Kubernetes 네임스페이스 내부에서 사용할 수 있도록 설정하여 외부 서비스와의 통합 가능</td>\n</tr>\n<tr>\n<td><strong>Headless</strong></td>\n<td>O</td>\n<td>X</td>\n<td>Stateful 애플리케이션 또는 Pod 직접 접근</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>\n<p><strong>Namespace</strong>: 하나의 클러스터를 논리적으로 분리하여 여러 애플리케이션, 팀, 환경(예: 개발, 테스트, 프로덕션)을 독립적으로 관리할 수 있도록 하는 가상 클러스터</p>\n<ul>\n<li><strong>default</strong>: 특별히 지정하지 않은 리소스가 생성되는 기본 namespace</li>\n<li><strong>kube-system</strong>: Kubernetes 시스템 구성 요소(Pod, Service 등)가 포함된 namespace</li>\n<li><strong>kube-public</strong>: 모든 사용자가 읽기 가능한 공개 namespace</li>\n<li><strong>kube-node-lease</strong>: 각 노드의 상태를 추적하기 위해 사용</li>\n<li>yaml apply 혹은 <code class=\"language-text\">kubectl create namespace my-namespace</code> 통해 생성 가능</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># kubectl apply -f namespace.yaml</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Namespace\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>namespace</code></pre></div>\n<h5 id=\"scheduling\" style=\"position:relative;\"><a href=\"#scheduling\" aria-label=\"scheduling permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scheduling</h5>\n<ul>\n<li>\n<p>Manual Scheduling</p>\n<ul>\n<li>k8s에서 이미 생성된 pod의 nodeName 변경은 불가</li>\n<li>따라서 이미 생성된 pod에 node를 할당하려면, Binding object를 생성하고 binding API에 요청 보내기</li>\n</ul>\n</li>\n<li>\n<p><strong>Label</strong></p>\n<ul>\n<li>기본 형식은 <code class=\"language-text\">&lt;prefix&gt;/&lt;name&gt;</code> 형태인데 prefix는 선택사항이고, 일반적으로 도메인 이름 형식을 따름(예: <code class=\"language-text\">example.com/mylabel</code>)</li>\n<li>많이 사용되는 라벨은 다음과 같음</li>\n<li><code class=\"language-text\">app</code>: 애플리케이션 이름.</li>\n<li><code class=\"language-text\">env</code>: 환경 정보 (예: <code class=\"language-text\">production</code>, <code class=\"language-text\">staging</code>, <code class=\"language-text\">dev</code>).</li>\n<li><code class=\"language-text\">tier</code>: 애플리케이션 계층 (예: <code class=\"language-text\">frontend</code>, <code class=\"language-text\">backend</code>, <code class=\"language-text\">database</code>).</li>\n<li><code class=\"language-text\">role</code>: 역할 정보 (예: <code class=\"language-text\">web-server</code>, <code class=\"language-text\">data-store</code>).</li>\n<li><code class=\"language-text\">function</code>: 특정 기능을 나타내는 라벨.</li>\n<li><code class=\"language-text\">kubectl get pods --selector app=App1</code>과 같은 형태로 필터링 가능</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVeision</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> simple<span class=\"token punctuation\">-</span>webapp\n\t<span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n\t\t<span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> App1\n\t\t<span class=\"token key atrule\">function</span><span class=\"token punctuation\">:</span> Front<span class=\"token punctuation\">-</span>End</code></pre></div>\n<ul>\n<li>\n<p><strong>Taints</strong>: 노드에 적용되어 특정 파드가 해당 노드에 스케줄링되지 못하게 하는 메커니즘입니다. 노드에 Taint(오염)가 설정되면, 해당 Taint를 \"참을 수 있는\" 파드(Toleration)가 아니면 그 노드에 배치되지 않습니다.</p>\n<ul>\n<li>Key: Taint의 이름 또는 속성</li>\n<li>Value: 선택 사항으로, Key에 대한 추가 정보 제공</li>\n<li>Effect: Taint의 효과를 정의하며, 아래 중 하나를 사용</li>\n<li><strong><code class=\"language-text\">NoSchedule</code></strong>: Taint를 참을 수 없는 파드는 이 노드에 배치되지 않음</li>\n<li><strong><code class=\"language-text\">PreferNoSchedule</code></strong>: 가능한 한 이 노드에 배치되지 않으나, 강제하지 않음</li>\n<li><strong><code class=\"language-text\">NoExecute</code></strong>: 즉시 노드에서 파드를 제거하며, 새 파드도 스케줄링되지 않음</li>\n<li>흥미로운 사실: Master node는 NoSchedule taints가 걸려있고, 어떠한 application pod도 뜨지 않음 </li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">key=value<span class=\"token punctuation\">:</span>effect</code></pre></div>\n<ul>\n<li>\n<p><strong>Toleration</strong>: 파드가 특정 Taint를 \"참을 수 있도록\" 허용하는 설정입니다. Toleration이 없는 파드는 Taint가 있는 노드에 스케줄링될 수 없습니다.</p>\n<ul>\n<li>Key: Taint의 Key와 일치해야 함</li>\n<li>Operator</li>\n<li><code class=\"language-text\">Equal</code>: Key와 Value가 일치해야 Toleration 인정</li>\n<li><code class=\"language-text\">Exists</code>: Key만 일치하면 Toleration 인정</li>\n<li>Value: Taint의 Value와 일치해야 함(Equal인 경우에만 사용)</li>\n<li>Effect: Taint의 Effect와 일치해야 함</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> toleration<span class=\"token punctuation\">-</span>example\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">tolerations</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"dedicated\"</span>\n    <span class=\"token key atrule\">operator</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Equal\"</span>\n    <span class=\"token key atrule\">value</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"web\"</span>\n    <span class=\"token key atrule\">effect</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"NoSchedule\"</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx</code></pre></div>\n<ul>\n<li>\n<p><strong>Node Selector</strong>: Pod를 특정 Node에 스케줄링하기 위한 가장 간단한 메커니즘. Pod의 스펙에 <code class=\"language-text\">nodeSelector</code> 필드를 정의하여 특정 라벨을 가진 Node에만 Pod를 스케줄링하도록 제한</p>\n<ul>\n<li>복잡한 조건이나 논리 연산(예: OR, NOT)을 지원하지 않음</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>pod\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>container\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx\n  <span class=\"token key atrule\">nodeSelector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">disktype</span><span class=\"token punctuation\">:</span> ssd</code></pre></div>\n<ul>\n<li>\n<p><strong>Node Affinity</strong>: Node Selector의 한계를 보완하며, 더 유연하고 고급 스케줄링 옵션을 제공</p>\n<ul>\n<li><code class=\"language-text\">requiredDuringSchedulingIgnoredDuringExecution</code>: 필수 조건, 만족하지 않으면 스케줄링되지 않음</li>\n<li><code class=\"language-text\">preferredDuringSchedulingIgnoredDuringExecution</code>: 선호 조건, 가능하면 스케줄링하되 반드시 만족할 필요는 없음</li>\n<li>다중 조건 지원 (예: AND, OR)</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>pod\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">affinity</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">nodeAffinity</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">requiredDuringSchedulingIgnoredDuringExecution</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">nodeSelectorTerms</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">matchExpressions</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> disktype\n            <span class=\"token key atrule\">operator</span><span class=\"token punctuation\">:</span> In\n            <span class=\"token key atrule\">values</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> ssd\n      <span class=\"token key atrule\">preferredDuringSchedulingIgnoredDuringExecution</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">weight</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n        <span class=\"token key atrule\">preference</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">matchExpressions</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> region\n            <span class=\"token key atrule\">operator</span><span class=\"token punctuation\">:</span> In\n            <span class=\"token key atrule\">values</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> us<span class=\"token punctuation\">-</span>west<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>container\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx</code></pre></div>\n<ul>\n<li>\n<p><strong>Requirements &#x26; Limits</strong></p>\n<ul>\n<li>no request &#x26; no limit: 하나의 pod이 너무 많은 node cpu 차지할 수 있음</li>\n<li>no request &#x26; limit: 이 경우는 k8s에서 자동으로 request = limit으로 설정</li>\n<li>request &#x26; limit: 특정 pod이 cpu 많이 필요한 작업을 할 때, limit 때문에 최고 효율 내지 못할 수 있음</li>\n<li>request &#x26; no limit: 기본적인 cpu 보장 받으면서도 필요할 때 효율도 낼 수 있음</li>\n<li>대신 메모리의 경우엔, cpu와 달리 memory가 꽉 차면 pod을 일부 죽이는 수 밖에 없다.</li>\n</ul>\n</li>\n<li>\n<p><strong>DemonSets</strong>: 클러스터의 모든 (또는 선택된) node에 특정 pod를 하나씩 실행하도록 보장하는 리소스</p>\n<ul>\n<li>monitoring solution &#x26; logs viewer에 사용</li>\n<li>kube-proxy나 weave-set도 DemonSet 중 하나임</li>\n</ul>\n</li>\n<li>\n<p><strong>Static Pods</strong>: api server를 거치지 않고, 특정 node에서 직접 kubelet에 의해 관리되는 pod</p>\n<ul>\n<li>사용 예제: 클러스터의 기본 컴포넌트 실행(예: etcd, kube-apiserver, kube-controller-manager), API 서버 없이 동작해야 하는 고가용성 환경, 등</li>\n<li>장점: api server가 다운되더라도 pod를 유지 가능, Kubernetes 외부에서 독립적으로 실행 가능.</li>\n<li>단점: 중앙에서 관리할 수 없으며 수동 작업 필요, 상태나 변경 사항을 Kubernetes 클러스터에서 쉽게 확인하거나 수정할 수 없음.</li>\n</ul>\n</li>\n<li>\n<p>Scheduling Plugins: 아래 플러그인 외에도 커스텀 가능</p>\n<ol>\n<li>Scheduling queue: PrioritySort</li>\n<li>Filtering: NodeResourcesFit, NodeName, NodeUnschedulable, ...</li>\n<li>Scroing: NodeResourcesFit, ImageLocality, ...</li>\n<li>Binding: DefaultBinder</li>\n</ol>\n</li>\n</ul>\n<h5 id=\"application-lifecycle-management\" style=\"position:relative;\"><a href=\"#application-lifecycle-management\" aria-label=\"application lifecycle management permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Application Lifecycle Management</h5>\n<ul>\n<li>Rolling Update</li>\n<li>Rollback</li>\n<li>ConfigMaps</li>\n<li>Secrets</li>\n<li>initContainer</li>\n</ul>\n<h5 id=\"cluster-maintenance\" style=\"position:relative;\"><a href=\"#cluster-maintenance\" aria-label=\"cluster maintenance permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cluster Maintenance</h5>\n<ul>\n<li>OS Upgrades</li>\n<li>Cluster Upgrades</li>\n<li>ETCDCTL</li>\n</ul>\n<h5 id=\"security\" style=\"position:relative;\"><a href=\"#security\" aria-label=\"security permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Security</h5>\n<ul>\n<li>TLS</li>\n<li>Certificate API</li>\n<li>KubeConfig</li>\n<li>API Groups</li>\n<li>Authorization</li>\n<li>Role</li>\n<li>Network Policy</li>\n</ul>\n<h5 id=\"storage\" style=\"position:relative;\"><a href=\"#storage\" aria-label=\"storage permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Storage</h5>\n<ul>\n<li>Persistent Volumes</li>\n<li>Persistent Volume Claims</li>\n</ul>\n<h5 id=\"networking\" style=\"position:relative;\"><a href=\"#networking\" aria-label=\"networking permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Networking</h5>\n<ul>\n<li>Pod Networking</li>\n<li>Cluster Networking</li>\n<li>CNI</li>\n<li>IP Address Management - Weave</li>\n<li>Service Networking</li>\n<li>DNS</li>\n<li>CoreDNS</li>\n<li>Ingress</li>\n</ul>\n<h5 id=\"etc\" style=\"position:relative;\"><a href=\"#etc\" aria-label=\"etc permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ETC.</h5>\n<ul>\n<li>Kubeadm</li>\n<li>\n<p>Trouble Shooting</p>\n<ul>\n<li>Application Failure</li>\n<li>Control Plane Failure</li>\n<li>Worker Node Failure</li>\n<li>Network Troubleshooting</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"helm\" style=\"position:relative;\"><a href=\"#helm\" aria-label=\"helm permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Helm</h3>\n<p>Helm chart는 Kubernetes 애플리케이션을 정의하는 템플릿화된 YAML 파일들의 모음입니다. 하나의 chart는 애플리케이션을 배포하는 데 필요한 모든 Kubernetes 리소스를 포함하고 있습니다. 기본적인 구조는 다음과 같습니다.</p>\n<ul>\n<li>Chart.yaml: chart에 대한 메타데이터(이름, 버전, 설명 등)를 포함하는 파일</li>\n<li>values.yaml: chart에서 사용되는 기본값들을 정의하는 파일</li>\n<li>templates/: 실제 Kubernetes 리소스를 정의하는 템플릿 파일들이 위치한 디렉토리</li>\n</ul>\n<p>values는 chart의 '템플릿 파일'들에 전달되는 변수 값들을 정의합니다. 기본값은 <code class=\"language-text\">values.yaml</code> 파일에 정의되며, 사용자 정의 값은 설치 시 <code class=\"language-text\">--values</code> 또는 <code class=\"language-text\">-f</code> 플래그를 사용하여 추가할 수 있습니다. values 파일을 통해 동일한 chart를 다양한 환경에서 재사용할 수 있습니다(가장 쉬운 예로는 dev, prod 분리)</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># values.yaml</span>\n<span class=\"token key atrule\">replicaCount</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n<span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">repository</span><span class=\"token punctuation\">:</span> nginx\n  <span class=\"token key atrule\">tag</span><span class=\"token punctuation\">:</span> stable</code></pre></div>\n<p>Template은 Kubernetes 리소스 정의를 동적이고 유연하게 만들기 위해 사용하는 템플릿 파일입니다. 정의된 변수들은 values 파일에서 정의된 값들로 치환되며, 이를 통해 Kubernetes 매니페스트를 동적으로 생성할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># templates/deployment.yaml</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .Release.Name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span>deployment\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .Values.replicaCount <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"{{ .Values.image.repository }}:{{ .Values.image.tag }}\"</span></code></pre></div>\n<p>결과적으로, 전체적인 동작은 다음과 같습니다.</p>\n<ol>\n<li>Helm chart는 Kubernetes 애플리케이션을 배포하는 데 필요한 모든 리소스 정의를 포함합니다.</li>\n<li>values 파일을 통해 애플리케이션 배포에 사용할 값들을 설정합니다. </li>\n<li>template 파일은 values 파일의 값들을 사용하여 Kubernetes 리소스 매니페스트를 동적으로 생성합니다.</li>\n<li>최종적으로 Helm은 템플릿을 렌더링하여 완전한 Kubernetes 매니페스트 파일을 생성하고 이를 클러스터에 적용합니다. 미리 적용될 값을 확인해보기 위해서는 <code class=\"language-text\">--dry-run</code> 옵션을 사용해볼 수 있습니다 (<code class=\"language-text\">helm install NAME . --dry-run --values=values.yaml</code>).</li>\n</ol>\n<p>다양한 helm 커맨드들은 공식 사이트의 <a href=\"https://helm.sh/docs/intro/cheatsheet/\">cheat sheet</a> 항목에서 확인 가능합니다.</p>\n<h3 id=\"local-development\" style=\"position:relative;\"><a href=\"#local-development\" aria-label=\"local development permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Local Development</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 760px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/04abf573ae735e9efd64eae2ae52f4e3/c27e7/24-07-31-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABQElEQVQoz42S61LCMBCFeQ5KC8VCm0uT3iEEEMfLOPrL93+Y4yYDWKGgP84k2e5+Od3NSLQWvNki4B1C3mCykJgs87MCOo8T4dd+/JZG/US3vyyc8RKxqBCm6n/AE8itablGkjcYO/AxwT6/o7JPvcvkeT+kIzBHSIm8NmDlyu+DhBFUIS73WOgWy6JDlGpf5Nye1Df04zDhmCoDufsEN6+YEyTMDYK0QFwdILsdBIk1FqzeIFEt5rJGTBoEjh844sJi9fYFvf9AunpBpCwm5CjVBqq2pA0EtWShOw+a8cr3d9ghBWZMoTZbJJIGsBR0CfMTLwnSrh/RdHtI1WGaFYgyffUSroARK5CvD9THDbLK+F9ycQeYEsCLcpyrMNO/BtGHnoGuwZJcCOpT7IrofG+afzp0ANds9+aGii516/s33VoluiDHgY0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/04abf573ae735e9efd64eae2ae52f4e3/15813/24-07-31-1.webp 190w,\n/static/04abf573ae735e9efd64eae2ae52f4e3/1cdb2/24-07-31-1.webp 380w,\n/static/04abf573ae735e9efd64eae2ae52f4e3/9046c/24-07-31-1.webp 760w,\n/static/04abf573ae735e9efd64eae2ae52f4e3/c89f9/24-07-31-1.webp 1140w,\n/static/04abf573ae735e9efd64eae2ae52f4e3/7afe4/24-07-31-1.webp 1520w,\n/static/04abf573ae735e9efd64eae2ae52f4e3/80ed4/24-07-31-1.webp 2144w\"\n              sizes=\"(max-width: 760px) 100vw, 760px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/04abf573ae735e9efd64eae2ae52f4e3/a2d4f/24-07-31-1.png 190w,\n/static/04abf573ae735e9efd64eae2ae52f4e3/3f520/24-07-31-1.png 380w,\n/static/04abf573ae735e9efd64eae2ae52f4e3/3c051/24-07-31-1.png 760w,\n/static/04abf573ae735e9efd64eae2ae52f4e3/b5cea/24-07-31-1.png 1140w,\n/static/04abf573ae735e9efd64eae2ae52f4e3/891d5/24-07-31-1.png 1520w,\n/static/04abf573ae735e9efd64eae2ae52f4e3/c27e7/24-07-31-1.png 2144w\"\n            sizes=\"(max-width: 760px) 100vw, 760px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/04abf573ae735e9efd64eae2ae52f4e3/3c051/24-07-31-1.png\"\n            alt=\"img\"\n            title=\"img\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>도커 데스크탑의 설정에서 k8s 항목에 들어간 뒤, 'Enable Kubernetes'을 클릭하면 로컬 환경에 k8s 클러스터를 구축할 수 있습니다. 그럼 자동으로 k8s config인 <code class=\"language-text\">~/.kube/config</code>에 docker-desktop이라는 이름의 cluster가 추가된 것을 확인할 수 있습니다. 만약 'Show system containers' 버튼을 누르셨다면, 도커 데스크탑의 container 목록에서 k8s의 시스템 컨테이너(kube-apiserver, etcd, kube-scheduler, kube-controller-manager...)들이 추가된 것 또한 확인할 수 있습니다. </p>\n<h3 id=\"references\" style=\"position:relative;\"><a href=\"#references\" aria-label=\"references permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>References</h3>\n<ul>\n<li><a href=\"https://kubernetes.io/ko/docs/home/\">https://kubernetes.io/ko/docs/home/</a></li>\n<li><a href=\"https://helm.sh/ko/docs/\">https://helm.sh/ko/docs/</a></li>\n<li><a href=\"https://www.json2yaml.com/\">https://www.json2yaml.com/</a></li>\n<li><a href=\"https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html\">https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html</a></li>\n</ul>","tableOfContents":"<ul>\n<li><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#kubernetes-components\">Kubernetes Components</a></li>\n<li>\n<p><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#kubernetes-objects\">Kubernetes Objects</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#object-spec\">Object spec</a></li>\n<li><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#resources\">Resources</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#kubectl\">Kubectl</a></li>\n<li><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#yaml\">YAML</a></li>\n<li>\n<p><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#core-concepts-for-cka\">Core Concepts for CKA</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#scheduling\">Scheduling</a></li>\n<li><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#application-lifecycle-management\">Application Lifecycle Management</a></li>\n<li><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#cluster-maintenance\">Cluster Maintenance</a></li>\n<li><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#security\">Security</a></li>\n<li><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#storage\">Storage</a></li>\n<li><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#networking\">Networking</a></li>\n<li><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#etc\">ETC.</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#helm\">Helm</a></li>\n<li><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#local-development\">Local Development</a></li>\n<li><a href=\"/MachineLearning/25-01-01-Comprehensive%20Guide%20to%20Kubernetes/#references\">References</a></li>\n</ul>","frontmatter":{"path":"/Operations/25-01-01/","title":"Comprehensive Guide to Kubernetes","category":"Operations","date":"2025-01-01"}}},"pageContext":{}},"staticQueryHashes":["2390655019","256249292","63159454"]}